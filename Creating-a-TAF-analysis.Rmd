---
output: md_document
---

```{r setup, echo=FALSE, message=FALSE, warning=FALSE}
library(icesTAF)
library(data.tree)

repoName <- "cod.27.47d20"

formatRcode <- function(x) {
  c("\`\`\`r",
    x,
    "\`\`\`")
}
```

# Creating a TAF analysis

This page was based on using the `icesTAF` package version ```r packageVersion("icesTAF")```
dated ```r packageDate("icesTAF")```.

## Clone

The first step is asking the ICES secratariate to create a repository for your stock.  In this example we will
work with North Sea cod: `r repoName` in 2019 - the repository name for the assessment will be 
`r repoName`.  When a new repository is created on GitHub you should clone the repository to your
own computer.  From here we will assume you have cloned the

## Make skeleton

The first step in creating a TAF analysis is to set out the basic folder and file structure of the project.
This is done using the function [`taf.skeleton`](https://rdrr.io/cran/icesTAF/man/taf.skeleton.html).
which creates the following structure in your working directory

```{r taf-skeleton-output, results='asis', echo=FALSE}
# make skeleton
taf.skeleton(repoName, force = TRUE)

# get skeleton path structure
paths <- dir(repoName, full.names = TRUE, recursive = TRUE)
paths <- c(paste0(repoName, "/bootstrap/initial/data/"), paths)

# make a data.tree and print it
tree <- as.Node(data.frame(pathString = paths))
res <- capture.output(print(as.data.frame(tree), row.names = FALSE))[-1]
cat(formatRcode(res), sep = "\n")
```

